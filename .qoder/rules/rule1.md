---
trigger: always_on
alwaysApply: true
---
Запомни, у приложение название ANL (не ABClient, не 3GC, не threegc, не tgc) ИМЕННО: ANL;
Константа если читаешь в коде ANL - анализируй подобие abclient (это Android название Windows версии приложения);
Все названия переменных берем из ПК версии. Чтобы проще было разобратся и не делать лишнии дубликаты. Все комментарии/сноски пишем на русском языке укзывая конкретно аналог какой функции ПК или Какой переменной ПК версии использованы;
Диалоги давай вести на русском языке. И делаем все шаги поэтапно, на каждый пункт этапа по окончанию говорим "Пункт N закончен. Приступаем к следующему ? и наименование пункта" ;
Всегда вести лист "To-do" при построении каких либо модификаций и исправлений;
Игровой сервер использует HTML5 движок;
CookiesManager управляет сессиями и аутентификацией;
Ключевые точки для Android портирования:
Основные API endpoints для Android клиента:
/modules/api/getid.cgi - получение ID игрока по нику
/modules/api/info.cgi - детальная информация (HP, MP, экипировка, эффекты)
/main.php - основной игровой интерфейс
/ch.php - чат и информация о комнате;
Критические моменты для эмуляции:
Все запросы используют cookies (особенно NeverNick);
Кодировка windows-1251 для русского языка;
User-Agent должен имитировать обычный браузер
Серверное время синхронизируется через HTTP заголовки
Структура данных UserInfo:
Полная информация о персонаже (HP, MP, экипировка, статус онлайн);
Cookie-система:
CookiesManager управляет всеми cookies через CookiePack;
Критический cookie NeverNick содержит имя пользователя;
Автоматическая проверка соответствия логина и cookie;
Сессии через прокси:
Все HTTP запросы проходят через локальный прокси;
Автоматическое добавление Cookie заголовков к каждому запросу;
Обработка Set-Cookie ответов от сервера;
Специальная аутентификация через /modules/abclient/auth.php;
3DES шифрование для критических данных;
полный аналог Windows версии. Если что не понятно всегда заглядывай в код Windows версии;
